# ๐ค Universal Messenger Bot for Directus

ะฃะฝะธะฒะตััะฐะปัะฝะฐั ัะธััะตะผะฐ ะผะตััะตะฝะดะถะตั-ะบะพะผะผัะฝะธะบะฐัะธะธ ะดะปั Directus ั ะฟะพะดะดะตัะถะบะพะน WhatsApp ะธ Telegram, ะธะฝัะตะณัะธัะพะฒะฐะฝะฝะฐั ั DeepSeek AI.

## ๐ ะะฟะธัะฐะฝะธะต

ะญัะพั ะฟัะพะตะบั ะฟัะตะดััะฐะฒะปัะตั ัะพะฑะพะน Python ะผะธะบัะพัะตัะฒะธั, ะบะพัะพััะน:
- ๐ฑ ะะพะดะบะปััะฐะตััั ะบ **WhatsApp** ัะตัะตะท Green API
- ๐ฌ ะะพะดะบะปััะฐะตััั ะบ **Telegram** ัะตัะตะท ะปะธัะฝัะน ะฐะบะบะฐัะฝั (userbot)
- ๐ง ะัะฟะพะปัะทัะตั **DeepSeek AI** ะดะปั ะณะตะฝะตัะฐัะธะธ ัะผะฝัั ะพัะฒะตัะพะฒ
- ๐๏ธ ะะฝัะตะณัะธััะตััั ั **Directus** ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟัะพะผะฟัะฐะผะธ ะธ ััะฐะฝะตะฝะธั ะธััะพัะธะธ
- ๐ ะะพะดะดะตัะถะธะฒะฐะตั ัะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธัะผะธ ะดะธะฐะปะพะณะพะฒ
- ๐ ะะพะณะธััะตั ะฒัั ะธััะพัะธั ะฒะทะฐะธะผะพะดะตะนััะฒะธะน

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ
โ  WhatsApp   โโโโโโโบโ  Green API   โโโโโโโบโ  Python Bot     โโโโโโโบโ   Directus   โ
โ  (ะบะปะธะตะฝั)   โ      โ   Service    โ      โ   Service       โ      โ   REST API   โ
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ      โ  - WhatsApp     โ      โโโโโโโโโโโโโโโโ
                                            โ  - Telegram     โ              โ
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ      โ  - DeepSeek AI  โ              โผ
โ  Telegram   โโโโโโโบโ  Telegram    โโโโโโโบโ  - State Mgmt   โ      โโโโโโโโโโโโโโโโ
โ  (ะปะธัะฝัะน)   โ      โ     API      โ      โโโโโโโโโโโโโโโโโโโ      โ  PostgreSQL  โ
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ                               โโโโโโโโโโโโโโโโ
```

## โ ะกัะฐััั: ะะะะะขะะะข!

- โ **WhatsApp ะฑะพั** ะฟะพะปััะฐะตั ะธ ะพัะฒะตัะฐะตั ะฝะฐ ัะพะพะฑัะตะฝะธั
- โ **Telegram ะฑะพั** ะฟะพะปััะฐะตั ะธ ะพัะฒะตัะฐะตั ะฝะฐ ัะพะพะฑัะตะฝะธั
- โ **DeepSeek AI** ะณะตะฝะตัะธััะตั ะบะพะฝัะตะบััะฝัะต ะพัะฒะตัั
- โ **ะััะพัะธั** ัะพััะฐะฝัะตััั ะฒ Directus
- โ **ะะธะดั** ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัััั ะฟัะธ ะฟะตัะฒะพะผ ัะพะพะฑัะตะฝะธะธ

## โจ ะะพะทะผะพะถะฝะพััะธ

### MVP (ะญัะฐะฟ 1) - WhatsApp โ
- โ ะัะฟัะฐะฒะบะฐ ะธ ะฟะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธะน ัะตัะตะท WhatsApp
- โ ะะตะฝะตัะฐัะธั ะพัะฒะตัะพะฒ ะฝะฐ ะฑะฐะทะต ะฟัะพะผะฟัะพะฒ ะธะท Directus
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธัะผะธ ะดะธะฐะปะพะณะพะฒ
- โ ะกะพััะฐะฝะตะฝะธะต ะธััะพัะธะธ ะฒ Directus

### ะญัะฐะฟ 2 - Telegram โ
- โ ะะพะดะบะปััะตะฝะธะต ะปะธัะฝะพะณะพ ะฐะบะบะฐัะฝัะฐ Telegram
- โ ะะดะธะฝะฐั ะปะพะณะธะบะฐ ะพะฑัะฐะฑะพัะบะธ ะดะปั ะพะฑะพะธั ะผะตััะตะฝะดะถะตัะพะฒ
- โ ะกะธะฝััะพะฝะธะทะฐัะธั ัะพััะพัะฝะธะน
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะปะธะดะพะฒ

### ะญัะฐะฟ 3 - ะะฐััะธัะตะฝะฝัะต ััะฝะบัะธะธ ๐
- ๐ ะฃะฒะตะดะพะผะปะตะฝะธั ะธ ะฝะฐะฟะพะผะธะฝะฐะฝะธั
- ๐ ะกะบะพัะธะฝะณ ะปะธะดะพะฒ
- ๐ ะะฝะฐะปะธัะธะบะฐ ะฒะทะฐะธะผะพะดะตะนััะฒะธะน
- ๐ ะะฒัะพะผะฐัะธะทะฐัะธั ะฑะธะทะฝะตั-ะฟัะพัะตััะพะฒ

## ๐ ะะพะบัะผะตะฝัะฐัะธั ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ

### ๐ฏ ะะฐัะฝะธัะต ะพัััะดะฐ:
- **[๐ ะะฐะบ ัะฐะฑะพัะฐัั ั ัะธััะตะผะพะน](docs/HOW_TO_WORK_WITH_SYSTEM.md)** - **ะะะฏะะะขะะะฌะะ ะ ะะะะงะขะะะะฎ!**
- **[๐ ะกัะตะผะฐ ะฑะฐะทั ะดะฐะฝะฝัั](docs/DATABASE_SCHEMA.md)** - ะัะต ะบะพะปะปะตะบัะธะธ ะธ ะฟัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั:
- [๐๏ธ ะััะธัะตะบัััะฐ](ARCHITECTURE.md) - ะะฑัะฐั ะฐััะธัะตะบัััะฐ ัะธััะตะผั
- [๐ ะัััััะน ััะฐัั](QUICKSTART.md) - ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ
- [Directus Setup](docs/DIRECTUS_SETUP.md)
- [Green API Setup](docs/GREEN_API_SETUP.md)
- [Telegram Setup](docs/TELEGRAM_SETUP.md)

## ๐ฏ ะะฐะบ ัะพัะผัะปะธัะพะฒะฐัั ะทะฐะดะฐัะธ

**โ ะะะะะะะฌะะ:**
```
ะะะะะงะ: ะะพะฑะฐะฒะธัั ะฟัะพะฒะตัะบั ะฝะฐะปะธัะธั ัะบััะตัะฐ ะฒ ะะ

ะะะะขะะะกะข:
- ะคะฐะนะป: wa_tg_bot/src/core/message_processor.py
- ะะพะปะปะตะบัะธั: scooters (ะฟะพะปั: model, available, price)

ะขะะะะะะะะะฏ:
1. ะัะธ ะฒะพะฟัะพัะต "ะััั ะปะธ Honda PCX?" ะฟัะพะฒะตัะธัั ะะ
2. ะัะปะธ available=true, ะพัะฒะตัะธัั ั ัะตะฝะพะน
3. ะัะปะธ available=false, ัะพะพะฑัะธัั ะบะพะณะดะฐ ะฑัะดะตั ะดะพัััะฟะตะฝ
```

**โ ะะะะะะะะะฌะะ:**
```
"ะกะดะตะปะฐะน ัะฐะบ, ััะพะฑั ะฑะพั ะทะฝะฐะป ะฟัะพ ัะบััะตัั"
```

**ะะพะดัะพะฑะฝะตะต:** [docs/HOW_TO_WORK_WITH_SYSTEM.md](docs/HOW_TO_WORK_WITH_SYSTEM.md)

## ๐ ะะปััะตะฒัะต ัะฐะนะปั

| ะคะฐะนะป | ะะฐะทะฝะฐัะตะฝะธะต | ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั |
|------|-----------|-------------------|
| `src/core/message_processor.py` | **ะะะะะะซะ** - ะฒัั ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ | ะัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ ะะฎะะะ ะปะพะณะธะบะธ |
| `src/integrations/directus.py` | ะะฐะฑะพัะฐ ั ะะ | ะัะธ ัะฐะฑะพัะต ั ะดะฐะฝะฝัะผะธ |
| `src/integrations/ai.py` | AI ะพัะฒะตัั | ะัะธ ะธะทะผะตะฝะตะฝะธะธ AI ะปะพะณะธะบะธ |
| `src/whatsapp/bot.py` | WhatsApp ะฑะพั | ะัะธ ัะฐะฑะพัะต ั WhatsApp |
| `src/telegram/bot.py` | Telegram ะฑะพั | ะัะธ ัะฐะฑะพัะต ั Telegram |

## ๐๏ธ ะะฐะทะฐ ะดะฐะฝะฝัั (Directus)

| ะะพะปะปะตะบัะธั | ะะฐะทะฝะฐัะตะฝะธะต |
|-----------|-----------|
| `bot_prompts` | ะกะธััะตะผะฝัะต ะฟัะพะผะฟัั ะดะปั AI |
| `bot_messages` | ะััะพัะธั ะฒัะตั ัะพะพะฑัะตะฝะธะน |
| `bot_states` | ะกะพััะพัะฝะธั ะดะธะฐะปะพะณะพะฒ |
| `leads` | ะะธะดั (ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัััั) |

**Directus UI:** http://localhost:8055
- Email: seocos@gmail.com
- Password: directus2024!

## ๐ ะัััััะน ััะฐัั

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Python 3.10+
- Directus (ัะถะต ัััะฐะฝะพะฒะปะตะฝ)
- Green API ะฐะบะบะฐัะฝั
- Telegram API credentials

### ะฃััะฐะฝะพะฒะบะฐ

1. **ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน ะธ ะฟะตัะตะนะดะธัะต ะฒ ะดะธัะตะบัะพัะธั:**
```bash
cd wa_tg_bot
```

2. **ะกะพะทะดะฐะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต:**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ะธะปะธ
venv\Scripts\activate  # Windows
```

3. **ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:**
```bash
pip install -r requirements.txt
```

4. **ะะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
```bash
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป ั ะฒะฐัะธะผะธ credentials
```

5. **ะะฐะฟัััะธัะต ะฑะพัะฐ:**
```bash
python src/main.py
```

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- [ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ](docs/ARCHITECTURE.md)
- [ะะฐัััะพะนะบะฐ Green API (WhatsApp)](docs/GREEN_API_SETUP.md)
- [ะะฐัััะพะนะบะฐ Telegram](docs/TELEGRAM_SETUP.md)
- [ะะฐัััะพะนะบะฐ Directus](docs/DIRECTUS_SETUP.md)
- [ะขะตััะธัะพะฒะฐะฝะธะต](docs/TESTING.md)
- [ะะตะฟะปะพะน](DEPLOYMENT.md)
- [ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ](docs/TROUBLESHOOTING.md)

## ๐ง ะะพะฝัะธะณััะฐัะธั

ะัะฝะพะฒะฝัะต ะฝะฐัััะพะนะบะธ ะฒ `.env` ัะฐะนะปะต:

```bash
# WhatsApp
GREEN_API_INSTANCE_ID=your_instance_id
GREEN_API_TOKEN=your_token

# Telegram
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
TELEGRAM_PHONE=+1234567890

# Directus
DIRECTUS_URL=http://localhost:8055
DIRECTUS_EMAIL=your_email
DIRECTUS_PASSWORD=your_password

# DeepSeek AI
DEEPSEEK_API_KEY=your_api_key
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

```bash
# ะะฐะฟัััะธัั ะฒัะต ัะตััั
pytest

# ะะฐะฟัััะธัั ั ะฟะพะบัััะธะตะผ
pytest --cov=src

# ะะฐะฟัััะธัั ะบะพะฝะบัะตัะฝัะน ัะตัั
pytest tests/test_whatsapp.py
```

## ๐ฆ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
wa_tg_bot/
โโโ src/
โ   โโโ whatsapp/          # WhatsApp ะผะพะดัะปั
โ   โโโ telegram/          # Telegram ะผะพะดัะปั
โ   โโโ core/              # ะะฑัะฐั ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โโโ integrations/      # ะะฝัะตะณัะฐัะธะธ (Directus, AI)
โ   โโโ utils/             # ะฃัะธะปะธัั
โ   โโโ config.py          # ะะพะฝัะธะณััะฐัะธั
โ   โโโ main.py            # ะขะพัะบะฐ ะฒัะพะดะฐ
โโโ tests/                 # ะขะตััั
โโโ docs/                  # ะะพะบัะผะตะฝัะฐัะธั
โโโ sessions/              # Telegram ัะตััะธะธ
โโโ logs/                  # ะะพะณะธ
```

## ๐ณ Docker

```bash
# ะกะฑะพัะบะฐ
docker-compose build

# ะะฐะฟััะบ
docker-compose up -d

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f
```

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

ะญัะพั ะฟัะพะตะบั ัะพะทะดะฐะฝ ะดะปั ะธะฝัะตะณัะฐัะธะธ ั Directus CRM ัะธััะตะผะพะน ะดะปั ะฑะธะทะฝะตัะฐ ะฟะพ ะฐัะตะฝะดะต ัะบััะตัะพะฒ.

## ๐ ะะธัะตะฝะทะธั

MIT License

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

- [Green API Documentation](https://green-api.com/docs/)
- [Telethon Documentation](https://docs.telethon.dev/)
- [DeepSeek API Documentation](https://platform.deepseek.com/api-docs/)
- [Directus Documentation](https://docs.directus.io/)

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะปะธ ั ะฒะฐั ะฒะพะทะฝะธะบะปะธ ะฒะพะฟัะพัั ะธะปะธ ะฟัะพะฑะปะตะผั, ะพะฑัะฐัะธัะตัั ะบ ะดะพะบัะผะตะฝัะฐัะธะธ ะฒ ะฟะฐะฟะบะต `docs/` ะธะปะธ ัะพะทะดะฐะนัะต issue.

---

**ะะตััะธั:** 1.0.0 (MVP)  
**ะกัะฐััั:** ะ ัะฐะทัะฐะฑะพัะบะต  
**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต:** 2025-01-08

